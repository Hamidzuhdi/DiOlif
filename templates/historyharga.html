<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Riwayat Harga Seragam</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f9f9f9; padding: 40px; }
    .container { background: #fff; padding: 30px; border-radius: 8px; max-width: 500px; margin: auto; box-shadow: 0 1px 4px rgba(0,0,0,0.1);}
    table { width: 100%; border-collapse: collapse; background: #fff; margin-top: 20px; }
    th, td { padding: 10px; border-bottom: 1px solid #eee; }
    th { background: #2979ff; color: #fff; }
  </style>
</head>
<body>
  <div class="container">
    <h2>Riwayat Harga Seragam</h2>
    <table>
      <thead>
        <tr>
          <th>No</th>
          <th>Harga Lama</th>
          <th>Waktu Perubahan</th>
        </tr>
      </thead>
      <tbody id="historyBody"></tbody>
    </table>
    <a href="/customers" style="margin-top:20px;display:inline-block;color:#2979ff;">Kembali</a>
  </div>
  <script>
    const id = window.location.pathname.split('/').pop();
    fetch('/api/customer-uniforms/' + id + '/price-history')
      .then(res => res.json())
      .then(data => {
        const tbody = document.getElementById('historyBody');
        if (!data || data.length === 0) {
          tbody.innerHTML = '<tr><td colspan="3" style="text-align:center;color:#aaa;">Belum ada riwayat perubahan harga.</td></tr>';
          return;
        }
        tbody.innerHTML = data.map((h, i) => `
          <tr>
            <td>${i+1}</td>
            <td>Rp ${Number(h.OldPrice).toLocaleString('id-ID')}</td>
            <td>${h.ChangedAt ? h.ChangedAt.replace('T', ' ').substring(0, 19) : '-'}</td>
          </tr>
        `).join('');
      });
  </script>
</body>
</html>